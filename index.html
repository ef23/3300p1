<html>

<head>
<title>INFO3300 Project 1</title>
<link href="https://fonts.googleapis.com/css?family=Share+Tech+Mono" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Open+Sans:300, 400,700,800|Space+Mono:400,400i,700" rel="stylesheet">
<link href="resources/Consolas.ttf" rel='stylesheet' type='text/css'>

<style>
svg {display:block;margin:auto;/*border: solid #ccc 1px;*/}
img {display:block; margin: auto; padding-bottom: 5%}
h1 { font-family: 'Open Sans', sans-serif; font-weight: 800; letter-spacing: 4px; font-size: 50px; color: rgb(8,160,233); text-align:center; padding-top: 60px;}
h2 { font-family: 'Open Sans', sans-serif; font-weight: 300; font-size: 20px; text-align:center; color: 'rgb(40, 116, 166)';}
h4 { font-family: 'Open Sans', sans-serif; font-weight: 800; font-size: 24px; text-align:center; margin: 10 0 10 0;}
body { font-family: 'Space Mono: 400', monospace; /*margin: auto; */background-color:rgb(232,245,253)}
p {font-family: 'Open Sans', sans-serif; font-weight: 300; text-align:center;}
.axis { font: 14px Consolas; }
.header {padding-bottom: 50px;}
</style>

</head>
<body>
<div class="header">
  <h1 class="text-center"> TRUMP AND TWITTERING NEWS</h1>
  <h2>A look at Trump's Twitter relationship with (fake) news before and after his election <br></h2>
  <p>Team: Eric Feng, Erin Chen, Sohyeon Hwang</p>
</div>

<h4> TRUMP'S TWEETS SINCE HIS CAMPAIGN BEGAN</h4>
<div class="container-fluid">
  <div id="div1"></div>
  <h4>TWEETS CONTAINING CONTENT ABOUT MEDIA</h4>
  <div id="div2">
	<h2> media mentioned approx. <b>17%</b> consistently </h2>
	</div>
  <h4> MENTIONED NEWS OUTLETS OVER TIME </h4>
  <div id="div3">
	<h2> % cumulative mentions per news outlets in media-related tweets</h2>
	</div>
  <h4>HOW FAKE IS THE NEWS THIS MONTH? </h4>
  <div id="div4">
  <h2> % media-related tweets mentioning "fake news" </h2>
  </div>
  <h4>TRUMP'S FAKEST MEDIA</h4>
  <div id="div5">
  <h2> % tweets per news outlet associated with "fake news" </h2>
  </div>
  <img src="https://s.faketrumptweet.com/jedmu1t6_13nkhbb_km8z88.png"/>
</div>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="js/vars.js"></script>
<script src="js/scatterplots.js"></script>
<script src="js/mediaData.js"></script>
<script src="js/stackedAreas.js"></script>
<script src="js/main.js"></script>
<script>
/***************** Graph 5: Trump's Fakest Media *******************/
var div5 = d3.select("#div5");
div5.append("svg")
  .attr("id","graph5")
  .attr("width", width)
  .attr("height", height*2);

var svg5 = d3.select("#graph5");

//graph labels
/* cnn : 44 / 235 --> 0.18723404255
fox : 15 / 354 --> 0.04237288135
nbc : 32 / 116 --> 0.27586206896
nyt : 24 / 115 --> 0.20869565217
washingtonpost : 12 / 50 --> 0.24

fakeNews / not Fake = 272 / 1087 --> 0.25
*/
//put in corresponding order
var labels = ["NBC","Washington Post","New York Times","CNN","Fox"];
var fakecounts = [32,12,24,44,15];
var ttlcounts = [115,50,116,235,354];

var mediaMentionCount = 0; //870
for (var i=0; i < labels.length; i++) {
	mediaMentionCount += ttlcounts[i]
};

var group5 = svg5.append("g");

var prevH = 100;

//labels
svg5.append("rect")
	.attr("x", xScale(electionDay)-85)
	.attr("y", prevH-70)
	.attr("height",30)
	.attr("width",50)
	.attr("fill","#D6EAF8")
	.attr("stroke-width","0.5")
	.attr("stroke","grey");

svg5.append("rect")
	.text("/")
	.attr("x", xScale(electionDay)-10)
	.attr("y", prevH-70)
	.attr("height",30)
	.attr("width",100)
	.attr("fill","#B0C4DE")
	.attr("stroke-width","0.5")
	.attr("stroke","grey");

svg5.append("text")
	.text("( FAKE / NOT FAKE )")
	.attr("x", xScale(electionDay))
	.attr("y", prevH-50)
	.style("font-size", 20)
	.style("font-weight", 800)
	.style("text-anchor","middle");

// make waffle charts of percentages
for (var i=0; i < labels.length; i++) {
	var g = group5.append("g").attr("id","#g"+(i+1));
	makeWaffle(ttlcounts[i],fakecounts[i],g,xScale(electionDay)-250,prevH);
	prevH += (Math.ceil(ttlcounts[i]/25)*20) +20;

	var numRows = Math.ceil(ttlcounts[i]/25);
	var y_move = (numRows*10);

	svg5.append("text")
		.attr("x", xScale(electionDay)-280)
		.attr("y", prevH-y_move)
		.text("#" + (i+1) + ".) " + labels[i])
		.style("font-size", 20)
		.style("font-weight", 100)
		.style("text-anchor","end");

	svg5.append("text")
		.attr("x", xScale(electionDay)+270)
		.attr("y", prevH-y_move)
		.text(ttlcounts[i] + " tweets, " + Math.round(((fakecounts[i]/ttlcounts[i])*100)) + "% fake")
		.style("font-size", 20)
		.style("font-weight", 100);
};

function makeWaffle(totalCount,count1,svg_group,x,y) {
	var percent1 = count1/totalCount;
	var percent_formatted = Math.round(1000*percent1)/10;

	var squareSize = 20;
	var coordx = x;
	var coordy = y;

	for (var i = 1; i < totalCount + 1; i++) {
		svg_group.append("rect")
		.attr("height", squareSize)
		.attr("width", squareSize)
		.attr("fill", (i<count1) ? "#D6EAF8":"#B0C4DE")
		.attr("stroke-width","0.25")
		.attr("stroke","grey")
		.attr("x",coordx)
		.attr("y",coordy);

		if (i % 25 == 0) {
			coordx = x;
			coordy = coordy + squareSize;
		} else {
			coordx += squareSize;
		}
	}
}
</script>
</div> <!-- end parallelx div-->
</body>
</html>
